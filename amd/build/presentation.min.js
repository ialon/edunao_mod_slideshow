/**
 * Add navigation functionality to slideshow
 *
 * @module      mod_slideshow/presentation
 * @copyright   2025 Josemaria Bolanos <admin@mako.digital>
 * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define([],(function(){const e=".slide",t=".prev",d=".next",s=".currentslide",l=".fullscreen",n=".editslide";return{init:function(c){let i=document.querySelector("#slideshow-"+c.cmid),r=i.querySelectorAll(e),o=r.length,u=0,a=i.querySelector(t),m=i.querySelector(d),L=i.querySelector(s),f=i.querySelector(l),v=document.querySelector(n);document.addEventListener("keyup",(e=>{document.fullscreenElement&&("ArrowLeft"===e.key&&h(),"ArrowRight"===e.key&&y())})),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement?i.classList.add("fullscreen"):i.classList.remove("fullscreen")})),a.addEventListener("click",(()=>{h()})),m.addEventListener("click",(()=>{y()}));const h=()=>{u>0&&(r[u].classList.add("hidden"),r[u-1].classList.remove("hidden"),u--,q())},y=()=>{u<o-1&&(r[u].classList.add("hidden"),r[u+1].classList.remove("hidden"),u++,q())};f.addEventListener("click",(()=>{document.fullscreenElement?document.exitFullscreen():i.requestFullscreen()})),v.addEventListener("click",(()=>{E()}));const E=()=>{let e=r[u].getAttribute("data-slideid");window.location.href="/mod/slideshow/edit.php?cm="+c.cmid+"&id="+e},q=()=>{L.innerText=u+1+"/"+o,0===u?a.classList.add("disabled"):a.classList.remove("disabled"),u===o-1?m.classList.add("disabled"):m.classList.remove("disabled")}}}}));