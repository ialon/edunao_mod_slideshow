{"version":3,"file":"presentation.min.js","sources":["../src/presentation.js"],"sourcesContent":["/**\n * Add navigation functionality to slideshow\n *\n * @module      mod_slideshow/presentation\n * @copyright   2025 Josemaria Bolanos <admin@mako.digital>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst Selectors = {\n    slides: '.slide',\n    prev: '.prev',\n    next: '.next',\n    currentSlide: '.currentslide',\n    fullscreen: '.fullscreen',\n};\n\n/**\n * Initialize module\n * @param {Number} cmid The course module id to setup for\n */\nexport const init = ({cmid}) => {\n    let container = document.querySelector('#slideshow-' + cmid);\n\n    let slides = container.querySelectorAll(Selectors.slides);\n    let total = slides.length;\n    let current = 0;\n\n    let prev = container.querySelector(Selectors.prev);\n    let next = container.querySelector(Selectors.next);\n    let currentslide = container.querySelector(Selectors.currentSlide);\n    let fullscreen = container.querySelector(Selectors.fullscreen);\n\n    document.addEventListener('keyup', (e) => {\n        if (document.fullscreenElement) {\n            if (e.key === 'ArrowLeft') {\n                prevSlide();\n            }\n            if (e.key === 'ArrowRight') {\n                nextSlide();\n            }\n        }\n    });\n\n    document.addEventListener('fullscreenchange', () => {\n        if (document.fullscreenElement) {\n            container.classList.add('fullscreen');\n        } else {\n            container.classList.remove('fullscreen');\n        }\n    });\n\n    prev.addEventListener('click', () => {\n        prevSlide();\n    });\n\n    next.addEventListener('click', () => {\n        nextSlide();\n    });\n\n    const prevSlide = () => {\n        window.console.log('Prev ' + current);\n        if (current > 0) {\n            slides[current].classList.add('hidden');\n            slides[current - 1].classList.remove('hidden');\n            current--;\n            updateCurrentSlide();\n        }\n    };\n\n    const nextSlide = () => {\n        window.console.log('next ' + current);\n        if (current < total - 1) {\n            slides[current].classList.add('hidden');\n            slides[current + 1].classList.remove('hidden');\n            current++;\n            updateCurrentSlide();\n        }\n    };\n\n    fullscreen.addEventListener('click', () => {\n        if (document.fullscreenElement) {\n            document.exitFullscreen();\n        } else {\n            container.requestFullscreen();\n        }\n    });\n\n    /**\n     * Updates the text content of the current slide element to display the current slide number and the total number of slides.\n     * @function\n     * @name updateCurrentSlide\n     * @global\n     */\n    const updateCurrentSlide = () => {\n        currentslide.innerText = (current + 1) + '/' + total;\n        if (current == 0) {\n            prev.classList.add('disabled');\n        } else {\n            prev.classList.remove('disabled');\n        }\n        if (current == total - 1) {\n            next.classList.add('disabled');\n        } else {\n            next.classList.remove('disabled');\n        }\n    };\n};\n"],"names":["Selectors","_exports","init","_ref","cmid","container","document","querySelector","slides","querySelectorAll","total","length","current","prev","next","currentslide","fullscreen","addEventListener","e","fullscreenElement","key","prevSlide","nextSlide","classList","add","remove","window","console","log","updateCurrentSlide","exitFullscreen","requestFullscreen","innerText"],"mappings":";;;;;;;;AAQA,MAAMA,iBACM,SADNA,eAEI,QAFJA,eAGI,QAHJA,uBAIY,gBAJZA,qBAKU,cA6FdC,SAAAC,KAtFkBC,OAAY,IAAXC,KAACA,MAAKD,KACnBE,UAAYC,SAASC,cAAc,cAAgBH,MAEnDI,OAASH,UAAUI,iBAAiBT,kBACpCU,MAAQF,OAAOG,OACfC,QAAU,EAEVC,KAAOR,UAAUE,cAAcP,gBAC/Bc,KAAOT,UAAUE,cAAcP,gBAC/Be,aAAeV,UAAUE,cAAcP,wBACvCgB,WAAaX,UAAUE,cAAcP,sBAEzCM,SAASW,iBAAiB,SAAUC,IAC5BZ,SAASa,oBACK,cAAVD,EAAEE,KACFC,YAEU,eAAVH,EAAEE,KACFE,YAER,IAGJhB,SAASW,iBAAiB,oBAAoB,KACtCX,SAASa,kBACTd,UAAUkB,UAAUC,IAAI,cAExBnB,UAAUkB,UAAUE,OAAO,aAC/B,IAGJZ,KAAKI,iBAAiB,SAAS,KAC3BI,WAAW,IAGfP,KAAKG,iBAAiB,SAAS,KAC3BK,WAAW,IAGf,MAAMD,UAAYA,KACdK,OAAOC,QAAQC,IAAI,QAAUhB,SACzBA,QAAU,IACVJ,OAAOI,SAASW,UAAUC,IAAI,UAC9BhB,OAAOI,QAAU,GAAGW,UAAUE,OAAO,UACrCb,UACAiB,qBACJ,EAGEP,UAAYA,KACdI,OAAOC,QAAQC,IAAI,QAAUhB,SACzBA,QAAUF,MAAQ,IAClBF,OAAOI,SAASW,UAAUC,IAAI,UAC9BhB,OAAOI,QAAU,GAAGW,UAAUE,OAAO,UACrCb,UACAiB,qBACJ,EAGJb,WAAWC,iBAAiB,SAAS,KAC7BX,SAASa,kBACTb,SAASwB,iBAETzB,UAAU0B,mBACd,IASJ,MAAMF,mBAAqBA,KACvBd,aAAaiB,UAAapB,QAAU,EAAK,IAAMF,MAChC,GAAXE,QACAC,KAAKU,UAAUC,IAAI,YAEnBX,KAAKU,UAAUE,OAAO,YAEtBb,SAAWF,MAAQ,EACnBI,KAAKS,UAAUC,IAAI,YAEnBV,KAAKS,UAAUE,OAAO,WAC1B,CACH,CACH"}